<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÂØºËà™‰∏≠ÂøÉ</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üêß</text></svg>">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f0f14;
      color: #e5e7eb;
      line-height: 1.6;
    }

    .header {
      background: #1a1a24;
      border-bottom: 1px solid #2a2a38;
      padding: 1.5rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
    }

    .header-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 2rem;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: #4a9eff;
    }

    .search-bar {
      flex: 1;
      max-width: 500px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 0.75rem 1rem;
      background: #0f0f14;
      border: 1px solid #2a2a38;
      border-radius: 8px;
      color: #e5e7eb;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .search-input:focus {
      outline: none;
      border-color: #4a9eff;
      box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.1);
    }

    .tabs {
      display: flex;
      gap: 0.5rem;
    }

    .tab {
      padding: 0.5rem 1rem;
      background: transparent;
      border: 1px solid transparent;
      border-radius: 6px;
      color: #9090a8;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .tab:hover {
      background: rgba(74, 158, 255, 0.1);
      color: #4a9eff;
    }

    .tab.active {
      background: #4a9eff;
      color: #fff;
    }

    .main {
      max-width: 1600px;
      margin: 0 auto;
      padding: 2rem;
    }

    .filter-bar {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      align-items: flex-start;
    }

    .filter-label {
      color: #9090a8;
      font-size: 0.9rem;
      padding-top: 0.4rem;
      flex-shrink: 0;
    }

    #filterChips {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      flex: 1;
    }

    .filter-chip {
      padding: 0.4rem 0.9rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid #2a2a38;
      border-radius: 20px;
      color: #9090a8;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-chip:hover {
      background: rgba(74, 158, 255, 0.1);
      border-color: #4a9eff;
      color: #4a9eff;
    }

    .filter-chip.active {
      background: #4a9eff;
      border-color: #4a9eff;
      color: #fff;
    }

    .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1rem;
    }

    .link-card {
      background: #1a1a24;
      border: 1px solid #2a2a38;
      border-radius: 12px;
      padding: 1.25rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .link-card:hover {
      border-color: #4a9eff;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(74, 158, 255, 0.15);
    }

    .link-header {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .link-icon {
      width: 20px;
      height: 20px;
      color: #4a9eff;
      flex-shrink: 0;
    }

    .link-info {
      flex: 1;
      min-width: 0;
    }

    .link-title {
      font-size: 1rem;
      font-weight: 600;
      color: #e5e7eb;
      margin-bottom: 0.25rem;
    }

    .link-url {
      font-size: 0.8rem;
      color: #9090a8;
      font-family: 'SF Mono', monospace;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .link-desc {
      font-size: 0.85rem;
      color: #9090a8;
      line-height: 1.5;
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transition: opacity 0.2s, max-height 0.2s;
    }

    .link-card.show-desc .link-desc {
      opacity: 1;
      max-height: 100px;
    }

    .link-tags {
      display: flex;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .link-tag {
      padding: 0.2rem 0.6rem;
      background: rgba(74, 158, 255, 0.1);
      border: 1px solid rgba(74, 158, 255, 0.3);
      border-radius: 4px;
      font-size: 0.75rem;
      color: #4a9eff;
    }

    .weather-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 1.5rem;
    }

    .weather-card {
      background: #1a1a24;
      border: 1px solid #2a2a38;
      border-radius: 12px;
      padding: 1.5rem;
    }

    .weather-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #e5e7eb;
    }

    .weather-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 0.75rem;
    }

    .weather-item {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid #2a2a38;
      border-radius: 8px;
      padding: 0.75rem;
      text-align: center;
    }

    .weather-item.current {
      background: linear-gradient(135deg, #a855f7, #ec4899);
      border-color: #a855f7;
    }

    .weather-time {
      font-size: 0.75rem;
      color: #9090a8;
      margin-bottom: 0.25rem;
    }

    .weather-item.current .weather-time {
      color: rgba(255, 255, 255, 0.9);
    }

    .weather-temp {
      font-size: 1rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .weather-item.current .weather-temp {
      color: #fff;
    }

    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #9090a8;
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #1a1a24;
      border: 1px solid #2a2a38;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: #e5e7eb;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        align-items: stretch;
      }

      .search-bar {
        max-width: 100%;
      }

      .links-grid {
        grid-template-columns: 1fr;
      }

      .weather-section {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">ÂØºËà™‰∏≠ÂøÉ</div>
      <div class="search-bar">
        <input type="text" class="search-input" placeholder="ÊêúÁ¥¢ÈìæÊé•..." id="searchInput">
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="links">ÈìæÊé•</button>
        <button class="tab" data-tab="weather">Â§©Ê∞î</button>
      </div>
    </div>
  </header>

  <main class="main">
    <div id="linksView">
      <div class="filter-bar">
        <span class="filter-label">Á≠õÈÄâ:</span>
        <div id="filterChips"></div>
      </div>
      <div class="links-grid" id="linksGrid"></div>
    </div>

    <div id="weatherView" style="display: none;">
      <div class="weather-section" id="weatherSection"></div>
    </div>
  </main>

  <div class="toast" id="toast"></div>

  <script>
    const navigationData = [
      {
        title: "È°πÁõÆÁÆ°ÁêÜ",
        links: [
          {
            title: "NCIS Á¶ÖÈÅì‰ªªÂä°ÊÄªËßà",
            url: "http://pm.saiit.com.cn/my/",
            description: "Á¶ÖÈÅì‰ªªÂä°ÊÄªËßàÂèäÂæÖÂäûÈù¢Êùø",
            tags: ["NCIS", "Á¶ÖÈÅì", "ÁÆ°ÁêÜ"]
          },
          {
            title: "ÈúÄÊ±ÇËßÑÊ†º 2.0",
            url: "https://fyvnc1t6bo.feishu.cn/wiki/JWOGw4HU5iiqQJktPcbceGOzndg?fromScene=spaceOverview",
            description: "Êñ∞ÁâàÊú¨ÈúÄÊ±ÇËßÑÊ†ºËØ¥Êòé",
            tags: ["È£û‰π¶", "ÈúÄÊ±Ç", "ÊñáÊ°£"]
          },
          {
            title: "NCIS ÂéüÂûã",
            url: "https://modao.cc/proto/FIFBDXrsv9h48aYqq8cpA/sharing?view_mode=device&screen=rbpUn2ZfEb5wxQ4Eo&canvasId=rcUjMnlRUn34N1M9YK5pEU",
            description: "NCIS Á≥ªÁªü‰∫ßÂìÅÂéüÂûã",
            tags: ["NCIS", "ÂéüÂûã", "ËÆæËÆ°"]
          },
          {
            title: "NCIS Êï∞Ê®°",
            url: "https://www.pdmaas.cn/design?projectId=1951183560404127746",
            description: "Êï∞ÊçÆÂ∫ìËÆæËÆ°ÊñáÊ°£",
            tags: ["NCIS", "Êï∞ÊçÆÂ∫ì", "ËÆæËÆ°"]
          },
          {
            title: "ÈáçË¶ÅÊï∞ÊçÆËÑöÊú¨ÂêåÊ≠•Âà∞UAT",
            url: "https://fyvnc1t6bo.feishu.cn/wiki/C8pTwMfFviw7Nhk9MSVcvCe0noe?sheet=VByGeN",
            description: "UAT ÁéØÂ¢ÉÂÖ≥ÈîÆÊï∞ÊçÆËÑöÊú¨",
            tags: ["È£û‰π¶", "Êï∞ÊçÆÂ∫ì", "UAT"]
          }
        ]
      },
      {
        title: "ÂºÄÂèë",
        links: [
          {
            title: "NCIS ÂºÄÂèëÁéØÂ¢É",
            url: "https://ncis-dev.szgas.com.cn/system/user",
            description: "NCIS ÂºÄÂèëÁéØÂ¢ÉÂú®Á∫ø",
            tags: ["NCIS", "ÁéØÂ¢É", "ÂÜÖÁΩë"]
          },
          {
            title: "NCIS Êï∞ÊçÆÂ∫ìËÑöÊú¨",
            url: "https://fyvnc1t6bo.feishu.cn/wiki/C8pTwMfFviw7Nhk9MSVcvCe0noe?sheet=wna8Wk",
            description: "NCIS Êï∞ÊçÆÂ∫ìËÑöÊú¨",
            tags: ["È£û‰π¶", "Êï∞ÊçÆÂ∫ì", "NCIS"]
          },
          {
            title: "NCIS ÂêéÁ´ØÂºÄÂèëËßÑËåÉ",
            url: "https://fyvnc1t6bo.feishu.cn/wiki/JwcDwpXwsi03PbkWkFqcby7LnJe",
            description: "ÂêéÁ´ØÂºÄÂèëËßÑËåÉ",
            tags: ["È£û‰π¶", "ËßÑËåÉ", "ÂêéÁ´Ø"]
          }
        ]
      },
      {
        title: "Environment",
        links: [
          {
            title: "Jenkins Build Env",
            url: "http://10.9.31.83:9001/job/sz-newcis-dev/",
            description: "Dev ÂàÜÊîØ Jenkins ÊûÑÂª∫",
            tags: ["Jenkins", "CI", "ÂÜÖÁΩë"]
          },
          {
            title: "Nacos",
            url: "http://10.9.18.74:20009/nacos/#/configurationManagement?dataId=&group=&appName=&namespace=ncis_dev&pageSize=&pageNo=&namespaceShowName=ncis_dev",
            description: "NCIS NacosÂú®Á∫ø",
            tags: ["ÂÜÖÁΩë", "ÈÖçÁΩÆ", "ÊúçÂä°"]
          },
          {
            title: "Â¥ñÂ±±Êï∞ÊçÆÂ∫ì ‚Äî CloudÁâà",
            url: "http://10.0.17.94:9328/",
            description: "YaShan‰∫ëÊï∞ÊçÆÂ∫ìÁéØÂ¢É, Á∫ø‰∏äÂ¥ñÂ±±‰∫ëÊï∞ÊçÆÂ∫ì",
            tags: ["Êï∞ÊçÆÂ∫ì", "ÁéØÂ¢É", "ÂÜÖÁΩë"]
          },
          {
            title: "NCIS ÊùÉÈôêËÆæËÆ°",
            url: "https://fyvnc1t6bo.feishu.cn/docx/CQXzdKaHRoP030xxRY0cS1ERnac",
            description: "Newcis ÊùÉÈôêÂíåÁôªÂΩïËÆæËÆ°ÊñáÊ°£",
            tags: ["È£û‰π¶", "ËÆæËÆ°", "ÊùÉÈôê"]
          },
          {
            title: "NCIS È£û‰π¶È°πÁõÆÊÄªËßà",
            url: "https://fyvnc1t6bo.feishu.cn/drive/folder/Pn06fVKxslHtHBdL4vgcdMsEnuk",
            description: "NCIS È£û‰π¶È°πÁõÆÊÄªËßà",
            tags: ["È£û‰π¶", "ÊñáÊ°£", "NCIS"]
          },
          {
            title: "CCBÊµãËØïÁéØÂ¢É",
            url: "https://demo.tzuat.szgas.com/",
            description: "Âª∫Ë°åÁ≥ªÁªüÊµãËØïÁéØÂ¢É, ÊóßÁ≥ªÁªüÊµãËØïÁéØÂ¢É",
            tags: ["Â§ñÈÉ®", "CCB", "ÁéØÂ¢É"]
          }
        ]
      }
    ];

    const WEATHER_STATIONS = [
      { id: 'xikeng', name: 'Ë•øÂùëÂú∞ÈìÅÁ´ô', lat: 22.7006976, lon: 114.0361803 },
      { id: 'shangmeilin', name: '‰∏äÊ¢ÖÊûóÂú∞ÈìÅÁ´ô', lat: 22.5711039, lon: 114.0553309 }
    ];

    let allLinks = [];
    let activeFilter = 'all';
    let activeTab = 'links';

    // ÂàùÂßãÂåñ
    function init() {
      allLinks = navigationData.flatMap(cat =>
        cat.links.map(link => ({ ...link, category: cat.title }))
      );

      renderFilters();
      renderLinks();
      setupEventListeners();
      loadWeather();
    }

    // Ê∏≤ÊüìÁ≠õÈÄâÂô®
    function renderFilters() {
      const tags = new Map();
      allLinks.forEach(link => {
        link.tags?.forEach(tag => {
          tags.set(tag, (tags.get(tag) || 0) + 1);
        });
      });

      const filterChips = document.getElementById('filterChips');
      let html = `<div class="filter-chip ${activeFilter === 'all' ? 'active' : ''}" data-filter="all">ÂÖ®ÈÉ® (${allLinks.length})</div>`;

      Array.from(tags.entries())
        .filter(([_, count]) => count >= 3)
        .sort((a, b) => b[1] - a[1])
        .forEach(([tag, count]) => {
          html += `<div class="filter-chip ${activeFilter === tag ? 'active' : ''}" data-filter="${tag}">${tag} (${count})</div>`;
        });

      filterChips.innerHTML = html;
    }

    // Ê∏≤ÊüìÈìæÊé•
    function renderLinks(searchTerm = '') {
      const grid = document.getElementById('linksGrid');
      let filtered = allLinks;

      if (activeFilter !== 'all') {
        filtered = filtered.filter(link => link.tags?.includes(activeFilter));
      }

      if (searchTerm) {
        const term = searchTerm.toLowerCase();
        filtered = filtered.filter(link =>
          link.title.toLowerCase().includes(term) ||
          link.description?.toLowerCase().includes(term) ||
          link.url.toLowerCase().includes(term)
        );
      }

      if (filtered.length === 0) {
        grid.innerHTML = '<div class="empty-state">Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÈìæÊé•</div>';
        return;
      }

      grid.innerHTML = filtered.map(link => `
        <div class="link-card" data-url="${link.url}">
          <div class="link-header">
            <svg class="link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
            </svg>
            <div class="link-info">
              <div class="link-title">${link.title}</div>
              <div class="link-url">${link.url}</div>
            </div>
          </div>
          ${link.description ? `<div class="link-desc">${link.description}</div>` : ''}
        </div>
      `).join('');
    }

    // Âä†ËΩΩÂ§©Ê∞î
    async function loadWeather() {
      const section = document.getElementById('weatherSection');

      for (const station of WEATHER_STATIONS) {
        try {
          const url = `https://api.open-meteo.com/v1/forecast?latitude=${station.lat}&longitude=${station.lon}&hourly=temperature_2m&past_hours=3&forecast_hours=12&timezone=Asia/Shanghai`;
          const res = await fetch(url);
          const data = await res.json();

          const now = new Date();
          const currentHour = now.getHours();

          let html = `
            <div class="weather-card">
              <div class="weather-title">${station.name}</div>
              <div class="weather-grid">
          `;

          const temps = data.hourly.temperature_2m;
          for (let i = 0; i < temps.length; i++) {
            const temp = temps[i];
            const time = new Date(data.hourly.time[i]);
            const hour = time.getHours();
            const isCurrent = i === 3;

            html += `
              <div class="weather-item ${isCurrent ? 'current' : ''}">
                <div class="weather-time">${hour}:00${isCurrent ? ' ÂΩìÂâç' : ''}</div>
                <div class="weather-temp">${Math.round(temp)}¬∞C</div>
              </div>
            `;
          }

          html += '</div></div>';
          section.innerHTML += html;
        } catch (e) {
          console.error('Weather fetch failed:', e);
        }
      }
    }

    // ‰∫ã‰ª∂ÁõëÂê¨
    function setupEventListeners() {
      // TabÂàáÊç¢
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          activeTab = tab.dataset.tab;
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          document.getElementById('linksView').style.display = activeTab === 'links' ? 'block' : 'none';
          document.getElementById('weatherView').style.display = activeTab === 'weather' ? 'block' : 'none';
        });
      });

      // Á≠õÈÄâ
      document.getElementById('filterChips').addEventListener('click', (e) => {
        const chip = e.target.closest('.filter-chip');
        if (chip) {
          activeFilter = chip.dataset.filter;
          renderFilters();
          renderLinks(document.getElementById('searchInput').value);
        }
      });

      // ÊêúÁ¥¢
      document.getElementById('searchInput').addEventListener('input', (e) => {
        renderLinks(e.target.value);
      });

      // ÈìæÊé•ÁÇπÂáª
      document.getElementById('linksGrid').addEventListener('click', (e) => {
        const card = e.target.closest('.link-card');
        if (card) {
          const url = card.dataset.url;
          window.open(url, '_blank');
          showToast('Â∑≤ÊâìÂºÄÈìæÊé•');
        }
      });

      // Èº†Ê†áÊÇ¨ÂÅúÊòæÁ§∫ÊèèËø∞
      let hoverTimer = null;
      document.getElementById('linksGrid').addEventListener('mouseover', (e) => {
        const card = e.target.closest('.link-card');
        if (card) {
          hoverTimer = setTimeout(() => {
            card.classList.add('show-desc');
          }, 300);
        }
      });

      document.getElementById('linksGrid').addEventListener('mouseout', (e) => {
        const card = e.target.closest('.link-card');
        if (card) {
          clearTimeout(hoverTimer);
          card.classList.remove('show-desc');
        }
      });
    }

    // ToastÊèêÁ§∫
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    init();
  </script>
</body>
</html>
